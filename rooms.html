<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
        <meta name="description" content="Website IDP 2020 Lecturers">
        <meta name="author" content="Christoph Nytsch-Geusen">
        <link rel="icon" href="../../favicon.ico">
        <title>IDP summer semester 2020</title>
        <!-- Bootstrap core CSS -->
        <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
        <!-- Custom styles for this template -->
        <link href="css/styles.css" rel="stylesheet">
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>
        <!-- Body content goes here -->

         <div class="container">
            <!-- Static navbar -->
            <nav class="navbar navbar-default">
                <div class="container-fluid">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-content">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="./index.html">Website IDP 2020 Lecturers</a>
                    </div>
                    <div class="collapse navbar-collapse" id="navbar-content">
                        <ul class="nav navbar-nav">
                            <li><a href="./index.html">Home</a></li>
                            <li><a href="./locations.html">Locations</a></li>
                            <li><a href="./buildings.html">Buildings</a></li>
                            <li class="active"><a href="./rooms.html">Rooms</a></li>
                            <li><a href="./users.html">Users</a></li>
                            <li><a href="./users_and_rooms.html">Users in their Rooms</a></li>
                            <li><a href="./contact.html">Contact</a></li>
                        </ul>
                    </div>
                </div>
            </nav>

            <div class="jumbotron">
                <h2>Room Boitzenburger Land</h2>
                <p>Room in Boitzenburger Land ...</p>

                  <div class="col-md-12 col-sm-12 col-xs-12">
                      <div class="thumbnail">
                          <img src="img/Radiator_Nytsch-Geusen.jpg" alt="">
                          <figcaption style="text-align:right; font-style:italic">
                              Heating radiator which supplies the room with heating energy (source: Christoph Nytsch-Geusen)
                          </figcaption>
                      </div>
                  </div>

                  <p>bla, bla</p>

                  <input type="range" class="slider" min="15" max="25" value="20.0" step="0.1" id="myRange">
                  <p>Ideal room air temperature [°C]: <span id="demo"></span></p>

                  <div id="dateAndTime">date and time</div>
                  <div id="sensTempValue">sensTempValue</div>
                  <div id="diffTempValue">diffTempValue</div>

                  <iframe src="https://shiftr.io/nytschgeusen/DHT11-test/embed?zoom=1" width="600" height="400" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
            </div>

            <div class="jumbotron">
                <h2>Room Berlin</h2>
                <p>Room in Berlin ...</p>

                  <div class="col-md-12 col-sm-12 col-xs-12">
                      <div class="thumbnail">
                          <img src="img/Radiator_Banhardt.jpg" alt="">
                          <figcaption style="text-align:right; font-style:italic">
                              Heating radiators underneath the parapets in the living and home office room. (source: Christoph Banhardt)
                          </figcaption>
                      </div>
                  </div>

                  <p>bla, bla</p>
            </div>

            <footer>
                <p>&copy; UdK Berlin, Fachgebiet Versorgungsplanung und Versorgungstechnik 2020</p>
                <p><a href="./imprint.html">Imprint</a> <a href="https://www.udk-berlin.de/en/quick-access/privacy-protection/">Privacy</a></p>
            </footer>
        </div>


        <!-- Bootstrap core JavaScript
        ================================================== -->
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="js/jquery-1.11.3.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
        <script src="js/ie10-viewport-bug-workaround.js"></script>
        <!-- <script src="https://code.jquery.com/jquery-2.2.3.min.js"></script> -->
        <script src="https://assets.shiftr.io/js/mqtt-2.9.0.js"></script>
        <script src="js/script.js" charset="utf-8"></script>
        <script>
        var slider = document.getElementById("myRange");
        var output = document.getElementById("demo");
        output.innerHTML = slider.value;
        slider.oninput = function() {
          output.innerHTML = this.value;
        }
        </script>
        <script>
        var counter = 1;
        var diffTemp;

        var client = mqtt.connect('mqtt://f53c6659:8b0660b57f7181d4@broker.shiftr.io/', {
            clientId: 'javascript'});

        client.on('connect', function(){
          console.log('client has connected!');
          client.subscribe('/environment-data/temperature');
          console.log('topic has subscribed');
        });

        client.on('message', function(topic, message) {
          console.log('new message:', topic, message.toString());
          console.log('new sensor values');
        });
        function get_values(){
          var datetime= new Date().toLocaleString();
          document.getElementById("dateAndTime").innerHTML = datetime;
          client.on('message', function(topic, message) {
            diffTemp = slider.value - message;
            document.getElementById("sensTempValue").innerHTML= "Measured air temperature: " + message.toString()+" °C";
            document.getElementById("diffTempValue").innerHTML= "Difference to ideal air temperature: " + diffTemp.toString()+" °C";
          });
        }
        setInterval(get_values, 1000);
        </script>
    </body>
</html>
